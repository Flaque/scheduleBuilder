"use strict";angular.module("scheduleBuilderApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angucomplete-alt","vesparny.fancyModal"]).config(["$routeProvider","$locationProvider","$sceDelegateProvider",function(e,s,a){e.when("/",{templateUrl:"views/main.html"}).when("/build",{templateUrl:"views/build.html",controller:"BuildCtrl",controllerAs:"build"}).otherwise({redirectTo:"/"}),a.resourceUrlWhitelist(["self","https://schedule-builder-backend.herokuapp.com/**"]),s.hashPrefix("")}]),angular.module("scheduleBuilderApp").controller("BuildCtrl",["$scope","$http","toastr","httpService","$fancyModal",function(e,s,a,t,l){console.log("fart"),e.allClasses=[],e.showBtns=!1,e.classpick=!1,e.clearAll=function(){e.classpick=!1,e.viableSchedules=[],e.events=[],o=[],e.showBtns=!1,e.vSched=[],n=0,e.formatRequest=[],e.userClasses=[],$("#calendar").fullCalendar("removeEvents"),a("warning","Potential classes have been cleared")},console.time("class load"),t.getClasses().then(function(s){e.allClasses=s.data,console.log(s.data),console.timeEnd("classes loaded")}),e.userClasses=[],e.addUserClasses=function(s){e.classpick=!0,e.userClasses.push(s)},e.edit=!1,e.toggleEdit=function(){e.edit=!e.edit},e.removeClass=function(s){var a=e.userClasses.indexOf(s);a>-1&&e.userClasses.splice(a,1),console.log(e.userClasses)},e.events=[];var n=0,o=[];e.viableSchedules=[],e.formatRequest=[];var r=function(){$("#calendar").fullCalendar("removeEvents"),e.events=[]};e.generateSchedule=function(s){r();for(var l=0;l<s.length;l++)e.formatRequest.push(s[l].description);if(0===e.formatRequest.length)a("error","One or more classes required");else{a("success","Your schedules are being prepared!");var c={classes:e.formatRequest,block:[]};t.postClass(c).then(function(s){o=s.data,e.viableSize=o.length,e.showCount=n+1,e.vSched=o[n],e.showBtns=!0,d()})}};var c=["#ff4444","#ffbb33","#00C851","#33b5e5","#2BBBAD","#4285F4","#aa66cc"],i=["#CC0000","#FF8800","#007E33","#0099CC","#00695c","#0d47a1","#9933CC"],d=function(){for(var s=[],a=[],t=0;t<e.vSched.length;t++)s.push(e.vSched[t].Times.split(" ")),a.push(e.vSched[t].Days);u(s,a)},u=function(s,a){for(var t=0;t<s.length;t++){var l=s[t].splice(0,1),n=s[t].splice(1,2),o=[];if("MWF"==a[t]?o=[1,3,5]:"TR"==a[t]?o=[2,4]:"MW"==a[t]?o=[1,3]:"WF"==a[t]?o=[3,5]:"T"==a[t]?o=[2]:"R"==a[t]?o=[4]:"M"==a[t]?o=[1]:"W"==a[t]?o=[3]:"F"==a[t]&&(o=[4]),"-"!==l&&"-"!==n){l=l.pop().slice(0,7),l=moment(l,["h:mmA"]).format("HH:mm"),n=n.pop().slice(0,7),n=moment(n,["h:mmA"]).format("HH:mm");var r={title:e.vSched[t].Class,start:l,end:n,dow:o,backgroundColor:c[t],borderColor:i[t]};e.events.push(r)}}$("#calendar").fullCalendar("addEventSource",e.events),$("#calendar").fullCalendar("rerenderEvents"),e.showCalendar()};e.showCalendar=function(){$(document).ready(function(){$("#calendar").fullCalendar({defaultView:"agendaWeek",defaultDate:"2017-09-25",allDaySlot:!1,weekends:!1,header:!1,minTime:"08:00:00",maxTime:"21:00:00",height:480,events:e.events,eventClick:function(s){e.moreInfo(s)}})})},e.nextPage=function(){r(),n===e.viableSize-1?n=0:n++,e.showCount=n+1,e.vSched=o[n],d()},e.prevPage=function(){r(),0===n?n=e.viableSize-1:n-=1,e.showCount=n+1,e.vSched=o[n],d()},e.moreInfo=function(s){e.classInformation;for(var a=0;a<e.vSched.length;a++)e.vSched[a].Class===s.title&&(e.classInformation=e.vSched[a],l.open({templateUrl:"../../views/classModal.html",scope:e}),$(".fancymodal-overlay fancymodal-overlay-opening").removeClass("fancymodal-overlay fancymodal-overlay-opening"),$(".fancymodal-content").removeClass("fancymodal-content").addClass("modal-content modal-dialog"))}}]),angular.module("scheduleBuilderApp").service("toastr",function(){var e=function(e,s){toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-bottom-right",preventDuplicates:!0,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr[e](s)};return e});const baseUrl="https://schedule-builder-backend.herokuapp.com/api/";angular.module("scheduleBuilderApp").service("httpService",["$http",function(e){this.getClasses=function(){return e.get(baseUrl+"classes")},this.postClass=function(s){return e.post(baseUrl+"schedules",s)}}]);